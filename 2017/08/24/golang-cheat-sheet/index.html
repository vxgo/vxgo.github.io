<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="ehlxr">
  <meta name="description" content="My Hugo Blog.">
  <meta name="keywords" content="[Hugo theme ehlxr]">
  
  <link rel="prev" href="https://vxgo.github.io/2017/07/25/use-introduction-of-powermock/" />
  <link rel="next" href="https://vxgo.github.io/2017/10/25/tmux-cheat-sheet/" />
  <link rel="canonical" href="https://vxgo.github.io/2017/08/24/golang-cheat-sheet/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           [转] Go Cheat Sheet | 胡言乱语
       
  </title>
  <meta name="title" content="[转] Go Cheat Sheet | 胡言乱语">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https://vxgo.github.io"
    },
    "articleSection" : "posts",
    "name" : "[转] Go Cheat Sheet",
    "headline" : "[转] Go Cheat Sheet",
    "description" : "<h1 id="go-cheat-sheet">Go Cheat Sheet</h1>

<h2 id="credits">Credits</h2>

<p>Most example code taken from <a href="http://tour.golang.org/" rel="nofollow noreferrer" target="_blank">A Tour of Go</a>, which is an excellent introduction to Go.
If you&rsquo;re new to Go, do that tour. Seriously.</p>

<h2 id="go-in-a-nutshell">Go in a Nutshell</h2>

<ul>
<li>Imperative language</li>
<li>Statically typed</li>
<li>Syntax tokens similar to C (but less parentheses and no semicolons) and the structure to Oberon-2</li>
<li>Compiles to native code (no JVM)</li>
<li>No classes, but structs with methods</li>
<li>Interfaces</li>
<li>No implementation inheritance. There&rsquo;s <a href="http://golang.org/doc/effective%5Fgo.html#embedding" rel="nofollow noreferrer" target="_blank">type embedding</a>, though.</li>
<li>Functions are first class citizens</li>
<li>Functions can return multiple values</li>
<li>Has closures</li>
<li>Pointers, but not pointer arithmetic</li>
<li>Built-in concurrency primitives: Goroutines and Channels</li>
</ul>

<p></p>",
    "inLanguage" : "zh-cn",
    "author" : "ehlxr",
    "creator" : "ehlxr",
    "publisher": "ehlxr",
    "accountablePerson" : "ehlxr",
    "copyrightHolder" : "ehlxr",
    "copyrightYear" : "2017",
    "datePublished": "2017-08-24 14:18:53 &#43;0000 UTC",
    "dateModified" : "2017-08-24 14:18:53 &#43;0000 UTC",
    "url" : "https://vxgo.github.io/2017/08/24/golang-cheat-sheet/",
    "wordCount" : "2374",
    "keywords" : [ "Golang","Go", "胡言乱语"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://vxgo.github.io">胡言乱语</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/link/" title="">Links</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/about/" title=""></a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://vxgo.github.io">胡言乱语</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/link/" title="">Links</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/about/" title=""></a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
          
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">[转] Go Cheat Sheet</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://vxgo.github.io" rel="author">ehlxr</a> with ♥
                <span class="post-time">
                on <time datetime=2017-08-24 itemprop="datePublished">August 24, 2017</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://vxgo.github.io/categories/golang/"> Golang </a>
                        
                </span>

                |
                <a href="#gitalk-container" itemprop="discussionUrl">
                    <span class="gitalk-comment-count" itemprop="commentCount"></span>
                </a>
                条评论
        </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title"></h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li><a href="#go-cheat-sheet">Go Cheat Sheet</a>
<ul>
<li><a href="#credits">Credits</a></li>
<li><a href="#go-in-a-nutshell">Go in a Nutshell</a></li>
</ul></li>
<li><a href="#basic-syntax">Basic Syntax</a>
<ul>
<li><a href="#hello-world">Hello World</a></li>
<li><a href="#operators">Operators</a>
<ul>
<li><a href="#arithmetic">Arithmetic</a></li>
<li><a href="#comparison">Comparison</a></li>
<li><a href="#logical">Logical</a></li>
<li><a href="#other">Other</a></li>
</ul></li>
<li><a href="#declarations">Declarations</a></li>
<li><a href="#functions">Functions</a>
<ul>
<li><a href="#functions-as-values-and-closures">Functions As Values And Closures</a></li>
<li><a href="#variadic-functions">Variadic Functions</a></li>
</ul></li>
<li><a href="#built-in-types">Built-in Types</a></li>
<li><a href="#type-conversions">Type Conversions</a></li>
<li><a href="#packages">Packages</a></li>
<li><a href="#control-structures">Control structures</a>
<ul>
<li><a href="#if">If</a></li>
<li><a href="#loops">Loops</a></li>
<li><a href="#switch">Switch</a></li>
</ul></li>
<li><a href="#arrays-slices-ranges">Arrays, Slices, Ranges</a>
<ul>
<li><a href="#arrays">Arrays</a></li>
<li><a href="#slices">Slices</a></li>
<li><a href="#operations-on-arrays-and-slices">Operations on Arrays and Slices</a></li>
</ul></li>
<li><a href="#maps">Maps</a></li>
<li><a href="#structs">Structs</a></li>
<li><a href="#pointers">Pointers</a></li>
<li><a href="#interfaces">Interfaces</a></li>
<li><a href="#embedding">Embedding</a></li>
<li><a href="#errors">Errors</a></li>
</ul></li>
<li><a href="#concurrency">Concurrency</a>
<ul>
<li><a href="#goroutines">Goroutines</a></li>
<li><a href="#channels">Channels</a>
<ul>
<li><a href="#channel-axioms">Channel Axioms</a></li>
</ul></li>
<li><a href="#printing">Printing</a></li>
</ul></li>
<li><a href="#snippets">Snippets</a>
<ul>
<li><a href="#http-server">HTTP Server</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

<script type="text/javascript">
  window.onload = function () {
    var fix = $('.post-toc');
    var end = $('.post-comment');
    var fixTop = fix.offset().top, fixHeight = fix.height();
    var endTop, miss;
    var offsetTop = fix[0].offsetTop;

    $(window).scroll(function () {
      var docTop = Math.max(document.body.scrollTop, document.documentElement.scrollTop);

      if (end.length > 0) {
        endTop = end.offset().top;
        miss = endTop - docTop - fixHeight;
      }

      if (fixTop < docTop) {
        fix.css({ 'position': 'fixed' });
        if ((end.length > 0) && (endTop < (docTop + fixHeight))) {
          fix.css({ top: miss });
        } else {
          fix.css({ top: 0 });
        }
      } else {
        fix.css({ 'position': 'absolute' });
        fix.css({ top: offsetTop });
      }
    })
  }
</script>

    <div class="post-content">
        

        

        
        

          
          
          

          
          
          

          <h1 id="go-cheat-sheet">Go Cheat Sheet</h1>

<h2 id="credits">Credits</h2>

<p>Most example code taken from <a href="http://tour.golang.org/" rel="nofollow noreferrer" target="_blank">A Tour of Go</a>, which is an excellent introduction to Go.
If you&rsquo;re new to Go, do that tour. Seriously.</p>

<h2 id="go-in-a-nutshell">Go in a Nutshell</h2>

<ul>
<li>Imperative language</li>
<li>Statically typed</li>
<li>Syntax tokens similar to C (but less parentheses and no semicolons) and the structure to Oberon-2</li>
<li>Compiles to native code (no JVM)</li>
<li>No classes, but structs with methods</li>
<li>Interfaces</li>
<li>No implementation inheritance. There&rsquo;s <a href="http://golang.org/doc/effective%5Fgo.html#embedding" rel="nofollow noreferrer" target="_blank">type embedding</a>, though.</li>
<li>Functions are first class citizens</li>
<li>Functions can return multiple values</li>
<li>Has closures</li>
<li>Pointers, but not pointer arithmetic</li>
<li>Built-in concurrency primitives: Goroutines and Channels</li>
</ul>

<p></p>

<h1 id="basic-syntax">Basic Syntax</h1>

<h2 id="hello-world">Hello World</h2>

<p>File <code>hello.go</code>:</p>

<pre><code class="language-go">package main

import &quot;fmt&quot;

func main() {
    fmt.Println(&quot;Hello Go&quot;)
}
</code></pre>

<p><code>$ go run hello.go</code></p>

<h2 id="operators">Operators</h2>

<h3 id="arithmetic">Arithmetic</h3>

<table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>+</code></td>
<td>addition</td>
</tr>

<tr>
<td><code>-</code></td>
<td>subtraction</td>
</tr>

<tr>
<td><code>*</code></td>
<td>multiplication</td>
</tr>

<tr>
<td><code>/</code></td>
<td>quotient</td>
</tr>

<tr>
<td><code>%</code></td>
<td>remainder</td>
</tr>

<tr>
<td><code>&amp;</code></td>
<td>bitwise and</td>
</tr>

<tr>
<td><code>?</code></td>
<td>bitwise or</td>
</tr>

<tr>
<td><code>^</code></td>
<td>bitwise xor</td>
</tr>

<tr>
<td><code>&amp;^</code></td>
<td>bit clear (and not)</td>
</tr>

<tr>
<td><code>&lt;&lt;</code></td>
<td>left shift</td>
</tr>

<tr>
<td><code>&gt;&gt;</code></td>
<td>right shift</td>
</tr>
</tbody>
</table>

<blockquote>
<p><code>?</code> -&gt; <code>|</code></p>
</blockquote>

<h3 id="comparison">Comparison</h3>

<table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>==</code></td>
<td>equal</td>
</tr>

<tr>
<td><code>!=</code></td>
<td>not equal</td>
</tr>

<tr>
<td><code>&lt;</code></td>
<td>less than</td>
</tr>

<tr>
<td><code>&lt;=</code></td>
<td>less than or equal</td>
</tr>

<tr>
<td><code>&gt;</code></td>
<td>greater than</td>
</tr>

<tr>
<td><code>&gt;=</code></td>
<td>greater than or equal</td>
</tr>
</tbody>
</table>

<h3 id="logical">Logical</h3>

<table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>&amp;&amp;</code></td>
<td>logical and</td>
</tr>

<tr>
<td><code>??</code></td>
<td>logical or</td>
</tr>

<tr>
<td><code>!</code></td>
<td>logical not</td>
</tr>
</tbody>
</table>

<blockquote>
<p><code>??</code> -&gt; <code>||</code></p>
</blockquote>

<h3 id="other">Other</h3>

<table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>&amp;</code></td>
<td>address of / create pointer</td>
</tr>

<tr>
<td><code>*</code></td>
<td>dereference pointer</td>
</tr>

<tr>
<td><code>&lt;-</code></td>
<td>send / receive operator (see &lsquo;Channels&rsquo; below)</td>
</tr>
</tbody>
</table>

<h2 id="declarations">Declarations</h2>

<p>Type goes after identifier!</p>

<pre><code class="language-go">var foo int // declaration without initialization
var foo int = 42 // declaration with initialization
var foo, bar int = 42, 1302 // declare and init multiple vars at once
var foo = 42 // type omitted, will be inferred
foo := 42 // shorthand, only in func bodies, omit var keyword, type is always implicit
const constant = &quot;This is a constant&quot;
</code></pre>

<h2 id="functions">Functions</h2>

<pre><code class="language-go">// a simple function
func functionName() {}

// function with parameters (again, types go after identifiers)
func functionName(param1 string, param2 int) {}

// multiple parameters of the same type
func functionName(param1, param2 int) {}

// return type declaration
func functionName() int {
    return 42
}

// Can return multiple values at once
func returnMulti() (int, string) {
    return 42, &quot;foobar&quot;
}
var x, str = returnMulti()

// Return multiple named results simply by return
func returnMulti2() (n int, s string) {
    n = 42
    s = &quot;foobar&quot;
    // n and s will be returned
    return
}
var x, str = returnMulti2()

</code></pre>

<h3 id="functions-as-values-and-closures">Functions As Values And Closures</h3>

<pre><code class="language-go">func main() {
    // assign a function to a name
    add := func(a, b int) int {
        return a + b
    }
    // use the name to call the function
    fmt.Println(add(3, 4))
}

// Closures, lexically scoped: Functions can access values that were
// in scope when defining the function
func scope() func() int{
    outer_var := 2
    foo := func() int { return outer_var}
    return foo
}

func another_scope() func() int{
    // won't compile because outer_var and foo not defined in this scope
    outer_var = 444
    return foo
}


// Closures: don't mutate outer vars, instead redefine them!
func outer() (func() int, int) {
    outer_var := 2
    inner := func() int {
        outer_var += 99 // attempt to mutate outer_var from outer scope
        return outer_var // =&gt; 101 (but outer_var is a newly redefined
                         //         variable visible only inside inner)
    }
    return inner, outer_var // =&gt; 101, 2 (outer_var is still 2, not mutated by foo!)
}
</code></pre>

<h3 id="variadic-functions">Variadic Functions</h3>

<pre><code class="language-go">func main() {
	fmt.Println(adder(1, 2, 3)) 	// 6
	fmt.Println(adder(9, 9))	// 18

	nums := []int{10, 20, 30}
	fmt.Println(adder(nums...))	// 60
}

// By using ... before the type name of the last parameter you can indicate that it takes zero or more of those parameters.
// The function is invoked like any other function except we can pass as many arguments as we want.
func adder(args ...int) int {
	total := 0
	for _, v := range args { // Iterates over the arguments whatever the number.
		total += v
	}
	return total
}
</code></pre>

<h2 id="built-in-types">Built-in Types</h2>

<pre><code>bool

string

int  int8  int16  int32  int64
uint uint8 uint16 uint32 uint64 uintptr

byte // alias for uint8

rune // alias for int32 ~= a character (Unicode code point) - very Viking

float32 float64

complex64 complex128
</code></pre>

<h2 id="type-conversions">Type Conversions</h2>

<pre><code class="language-go">var i int = 42
var f float64 = float64(i)
var u uint = uint(f)

// alternative syntax
i := 42
f := float64(i)
u := uint(f)
</code></pre>

<h2 id="packages">Packages</h2>

<ul>
<li>Package declaration at top of every source file</li>
<li>Executables are in package <code>main</code></li>
<li>Convention: package name == last name of import path (import path <code>math/rand</code> =&gt; package <code>rand</code>)</li>
<li>Upper case identifier: exported (visible from other packages)</li>
<li>Lower case identifier: private (not visible from other packages)</li>
</ul>

<h2 id="control-structures">Control structures</h2>

<h3 id="if">If</h3>

<pre><code class="language-go">func main() {
	// Basic one
	if x &gt; 0 {
		return x
	} else {
		return -x
	}

	// You can put one statement before the condition
	if a := b + c; a &lt; 42 {
		return a
	} else {
		return a - 42
	}

	// Type assertion inside if
	var val interface{}
	val = &quot;foo&quot;
	if str, ok := val.(string); ok {
		fmt.Println(str)
	}
}
</code></pre>

<h3 id="loops">Loops</h3>

<pre><code class="language-go">    // There's only `for`, no `while`, no `until`
    for i := 1; i &lt; 10; i++ {
    }
    for ; i &lt; 10;  { // while - loop
    }
    for i &lt; 10  { // you can omit semicolons if there is only a condition
    }
    for { // you can omit the condition ~ while (true)
    }
</code></pre>

<h3 id="switch">Switch</h3>

<pre><code class="language-go">    // switch statement
    switch operatingSystem {
    case &quot;darwin&quot;:
        fmt.Println(&quot;Mac OS Hipster&quot;)
        // cases break automatically, no fallthrough by default
    case &quot;linux&quot;:
        fmt.Println(&quot;Linux Geek&quot;)
    default:
        // Windows, BSD, ...
        fmt.Println(&quot;Other&quot;)
    }

    // as with for and if, you can have an assignment statement before the switch value
    switch os := runtime.GOOS; os {
    case &quot;darwin&quot;: ...
    }

    // you can also make comparisons in switch cases
    number := 42
    switch {
        case number &lt; 42:
            fmt.Println(&quot;Smaller&quot;)
        case number == 42:
            fmt.Println(&quot;Equal&quot;)
        case number &gt; 42:
            fmt.Println(&quot;Greater&quot;)
    }
</code></pre>

<h2 id="arrays-slices-ranges">Arrays, Slices, Ranges</h2>

<h3 id="arrays">Arrays</h3>

<pre><code class="language-go">var a [10]int // declare an int array with length 10. Array length is part of the type!
a[3] = 42     // set elements
i := a[3]     // read elements

// declare and initialize
var a = [2]int{1, 2}
a := [2]int{1, 2} //shorthand
a := [...]int{1, 2} // elipsis -&gt; Compiler figures out array length
</code></pre>

<h3 id="slices">Slices</h3>

<pre><code class="language-go">var a []int                              // declare a slice - similar to an array, but length is unspecified
var a = []int {1, 2, 3, 4}               // declare and initialize a slice (backed by the array given implicitly)
a := []int{1, 2, 3, 4}                   // shorthand
chars := []string{0:&quot;a&quot;, 2:&quot;c&quot;, 1: &quot;b&quot;}  // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]

var b = a[lo:hi]	// creates a slice (view of the array) from index lo to hi-1
var b = a[1:4]		// slice from index 1 to 3
var b = a[:3]		// missing low index implies 0
var b = a[3:]		// missing high index implies len(a)
a =  append(a,17,3)	// append items to slice a
c := append(a,b...)	// concatenate slices a and b

// create a slice with make
a = make([]byte, 5, 5)	// first arg length, second capacity
a = make([]byte, 5)	// capacity is optional

// create a slice from an array
x := [3]string{&quot;Лайка&quot;, &quot;Белка&quot;, &quot;Стрелка&quot;}
s := x[:] // a slice referencing the storage of x
</code></pre>

<h3 id="operations-on-arrays-and-slices">Operations on Arrays and Slices</h3>

<p><code>len(a)</code> gives you the length of an array/a slice. It&rsquo;s a built-in function, not a attribute/method on the array.</p>

<pre><code class="language-go">// loop over an array/a slice
for i, e := range a {
    // i is the index, e the element
}

// if you only need e:
for _, e := range a {
    // e is the element
}

// ...and if you only need the index
for i := range a {
}

// In Go pre-1.4, you'll get a compiler error if you're not using i and e.
// Go 1.4 introduced a variable-free form, so that you can do this
for range time.Tick(time.Second) {
    // do it once a sec
}

</code></pre>

<h2 id="maps">Maps</h2>

<pre><code class="language-go">var m map[string]int
m = make(map[string]int)
m[&quot;key&quot;] = 42
fmt.Println(m[&quot;key&quot;])

delete(m, &quot;key&quot;)

elem, ok := m[&quot;key&quot;] // test if key &quot;key&quot; is present and retrieve it, if so

// map literal
var m = map[string]Vertex{
    &quot;Bell Labs&quot;: {40.68433, -74.39967},
    &quot;Google&quot;:    {37.42202, -122.08408},
}

</code></pre>

<h2 id="structs">Structs</h2>

<p>There are no classes, only structs. Structs can have methods.</p>

<pre><code class="language-go">// A struct is a type. It's also a collection of fields

// Declaration
type Vertex struct {
    X, Y int
}

// Creating
var v = Vertex{1, 2}
var v = Vertex{X: 1, Y: 2} // Creates a struct by defining values with keys
var v = []Vertex{{1,2},{5,2},{5,5}} // Initialize a slice of structs

// Accessing members
v.X = 4

// You can declare methods on structs. The struct you want to declare the
// method on (the receiving type) comes between the the func keyword and
// the method name. The struct is copied on each method call(!)
func (v Vertex) Abs() float64 {
    return math.Sqrt(v.X*v.X + v.Y*v.Y)
}

// Call method
v.Abs()

// For mutating methods, you need to use a pointer (see below) to the Struct
// as the type. With this, the struct value is not copied for the method call.
func (v *Vertex) add(n float64) {
    v.X += n
    v.Y += n
}

</code></pre>

<p><strong>Anonymous structs:</strong>
Cheaper and safer than using <code>map[string]interface{}</code>.</p>

<pre><code class="language-go">point := struct {
	X, Y int
}{1, 2}
</code></pre>

<h2 id="pointers">Pointers</h2>

<pre><code class="language-go">p := Vertex{1, 2}  // p is a Vertex
q := &amp;p            // q is a pointer to a Vertex
r := &amp;Vertex{1, 2} // r is also a pointer to a Vertex

// The type of a pointer to a Vertex is *Vertex

var s *Vertex = new(Vertex) // new creates a pointer to a new struct instance
</code></pre>

<h2 id="interfaces">Interfaces</h2>

<pre><code class="language-go">// interface declaration
type Awesomizer interface {
    Awesomize() string
}

// types do *not* declare to implement interfaces
type Foo struct {}

// instead, types implicitly satisfy an interface if they implement all required methods
func (foo Foo) Awesomize() string {
    return &quot;Awesome!&quot;
}
</code></pre>

<h2 id="embedding">Embedding</h2>

<p>There is no subclassing in Go. Instead, there is interface and struct embedding.</p>

<pre><code class="language-go">// ReadWriter implementations must satisfy both Reader and Writer
type ReadWriter interface {
    Reader
    Writer
}

// Server exposes all the methods that Logger has
type Server struct {
    Host string
    Port int
    *log.Logger
}

// initialize the embedded type the usual way
server := &amp;Server{&quot;localhost&quot;, 80, log.New(...)}

// methods implemented on the embedded struct are passed through
server.Log(...) // calls server.Logger.Log(...)

// the field name of the embedded type is its type name (in this case Logger)
var logger *log.Logger = server.Logger
</code></pre>

<h2 id="errors">Errors</h2>

<p>There is no exception handling. Functions that might produce an error just declare an additional return value of type <code>Error</code>. This is the <code>Error</code> interface:</p>

<pre><code class="language-go">type error interface {
    Error() string
}
</code></pre>

<p>A function that might return an error:</p>

<pre><code class="language-go">func doStuff() (int, error) {
}

func main() {
    result, error := doStuff()
    if (error != nil) {
        // handle error
    } else {
        // all is good, use result
    }
}
</code></pre>

<h1 id="concurrency">Concurrency</h1>

<h2 id="goroutines">Goroutines</h2>

<p>Goroutines are lightweight threads (managed by Go, not OS threads). <code>go f(a, b)</code> starts a new goroutine which runs <code>f</code> (given <code>f</code> is a function).</p>

<pre><code class="language-go">// just a function (which can be later started as a goroutine)
func doStuff(s string) {
}

func main() {
    // using a named function in a goroutine
    go doStuff(&quot;foobar&quot;)

    // using an anonymous inner function in a goroutine
    go func (x int) {
        // function body goes here
    }(42)
}
</code></pre>

<h2 id="channels">Channels</h2>

<pre><code class="language-go">ch := make(chan int) // create a channel of type int
ch &lt;- 42             // Send a value to the channel ch.
v := &lt;-ch            // Receive a value from ch

// Non-buffered channels block. Read blocks when no value is available, write blocks if a value already has been written but not read.

// Create a buffered channel. Writing to a buffered channels does not block if less than &lt;buffer size&gt; unread values have been written.
ch := make(chan int, 100)

close(ch) // closes the channel (only sender should close)

// read from channel and test if it has been closed
v, ok := &lt;-ch

// if ok is false, channel has been closed

// Read from channel until it is closed
for i := range ch {
    fmt.Println(i)
}

// select blocks on multiple channel operations, if one unblocks, the corresponding case is executed
func doStuff(channelOut, channelIn chan int) {
    select {
    case channelOut &lt;- 42:
        fmt.Println(&quot;We could write to channelOut!&quot;)
    case x := &lt;- channelIn:
        fmt.Println(&quot;We could read from channelIn&quot;)
    case &lt;-time.After(time.Second * 1):
        fmt.Println(&quot;timeout&quot;)
    }
}
</code></pre>

<h3 id="channel-axioms">Channel Axioms</h3>

<ul>
<li>A send to a nil channel blocks forever</li>
</ul>

<pre><code class="language-go">  var c chan string
  c &lt;- &quot;Hello, World!&quot;
  // fatal error: all goroutines are asleep - deadlock!
</code></pre>

<ul>
<li>A receive from a nil channel blocks forever</li>
</ul>

<pre><code class="language-go">  var c chan string
  fmt.Println(&lt;-c)
  // fatal error: all goroutines are asleep - deadlock!
</code></pre>

<ul>
<li>A send to a closed channel panics</li>
</ul>

<pre><code class="language-go">  var c = make(chan string, 1)
  c &lt;- &quot;Hello, World!&quot;
  close(c)
  c &lt;- &quot;Hello, Panic!&quot;
  // panic: send on closed channel
</code></pre>

<ul>
<li>A receive from a closed channel returns the zero value immediately</li>
</ul>

<pre><code class="language-go">  var c = make(chan int, 2)
  c &lt;- 1
  c &lt;- 2
  close(c)
  for i := 0; i &lt; 3; i++ {
      fmt.Printf(&quot;%d &quot;, &lt;-c)
  }
  // 1 2 0
</code></pre>

<h2 id="printing">Printing</h2>

<pre><code class="language-go">fmt.Println(&quot;Hello, 你好, नमस्ते, Привет, ᎣᏏᏲ&quot;) // basic print, plus newline
p := struct { X, Y int }{ 17, 2 }
fmt.Println( &quot;My point:&quot;, p, &quot;x coord=&quot;, p.X ) // print structs, ints, etc
s := fmt.Sprintln( &quot;My point:&quot;, p, &quot;x coord=&quot;, p.X ) // print to string variable

fmt.Printf(&quot;%d hex:%x bin:%b fp:%f sci:%e&quot;,17,17,17,17.0,17.0) // c-ish format
s2 := fmt.Sprintf( &quot;%d %f&quot;, 17, 17.0 ) // formatted print to string variable

hellomsg := `
 &quot;Hello&quot; in Chinese is 你好 ('Ni Hao')
 &quot;Hello&quot; in Hindi is नमस्ते ('Namaste')
` // multi-line string literal, using back-tick at beginning and end
</code></pre>

<h1 id="snippets">Snippets</h1>

<h2 id="http-server">HTTP Server</h2>

<pre><code class="language-go">package main

import (
    &quot;fmt&quot;
    &quot;net/http&quot;
)

// define a type for the response
type Hello struct{}

// let that type implement the ServeHTTP method (defined in interface http.Handler)
func (h Hello) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, &quot;Hello!&quot;)
}

func main() {
    var h Hello
    http.ListenAndServe(&quot;localhost:4000&quot;, h)
}

// Here's the method signature of http.ServeHTTP:
// type Handler interface {
//     ServeHTTP(w http.ResponseWriter, r *http.Request)
// }
</code></pre>

<hr />

<p><a href="https://github.com/a8m/go-lang-cheat-sheet" rel="nofollow noreferrer" target="_blank">原文出处</a></p>
    </div>

    <div class="post-copyright">
            
            <p class="copyright-item">
                <span>Author:</span>
                <span>ehlxr </span>
                </p>
            

            
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://vxgo.github.io/2017/08/24/golang-cheat-sheet/>
                        <script>
                            document.write(decodeURI(location.origin + location.pathname))
                        </script>
                    </a>
            </p>
            
            
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>


    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s):
            
            <span class="tag"><a href="https://vxgo.github.io/tags/golang/">
                    #Golang</a></span>
            
            <span class="tag"><a href="https://vxgo.github.io/tags/go/">
                    #Go</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> ·
                <span><a href="https://vxgo.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://vxgo.github.io/2017/07/25/use-introduction-of-powermock/" class="prev" rel="prev" title="使用 PowerMock 进行单元测试"><i class="iconfont icon-left"></i>&nbsp;使用 PowerMock 进行单元测试</a>
        
        
        <a href="https://vxgo.github.io/2017/10/25/tmux-cheat-sheet/" class="next" rel="next" title="[转]Tmux 快捷键速查表">[转]Tmux 快捷键速查表&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>
</article>
          
<div class="post-comment"><div onclick="showDisqus();" id="disqus_title" class="disqus_title">显示 Disqus 评论</div><div id="gitalk-container" class="gitalk-container"></div>
    <link rel="stylesheet" href="/lib/gitalk/gitalk-1.2.2.min.css">
    <script src="/lib/gitalk/gitalk-1.2.2.min.js"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: 'c6c0bf2da45d1d05a13ff6f45f6bf298',
        title: '[转] Go Cheat Sheet',
        clientID: '9d9d3623e388cb2f2283',
        clientSecret: '99c5b47b7553ab9122642f3e8f8d27973b22f8d2',
        repo: 'vxgo.github.io',
        owner: 'vxgo',
        admin: ['ehlxr'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the
      <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a>
    </noscript><div id="disqus_thread"></div>
    <script type="text/javascript">
    function showDisqus() {
      

      
      
      
      

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = false;
      var disqus_shortname = 'ehlxr';
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

      window.location.hash = "#disqus_thread";
    }
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>

          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2016 - 2018</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i>
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://vxgo.github.io">ehlxr</a> | </span>
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span>
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
